<h1>perfboard</h1>

<p>A performance metrics dashboard for continuous context recognition systems</p>

<p><link rel="stylesheet" type="text/css" href="markdown.css"></link></p>

<script src="http://code.jquery.com/jquery.min.js"></script>

<script src="http://d3js.org/d3.v2.js"></script>

<script src="util.js" type="text/javascript"></script>

<!-- To generate the html from this markdown file: perl ~/Markdown.pl --html4tags README.md > static/README.html -->

<h2>Background</h2>

<p>This project provides a framework for the evaluation and visualization of continuous context-recognition systems. We are investigating systems for automatic detection of visits, paths, and activities from mobile sensor data, and develop these tools to help evaluate the feasibility and quality of various approaches.</p>

<h2>Overview</h2>

<p>This section provides an overview of a typical development life-cycle for continuous context recognition systems and explains how this framework fits in.</p>

<ol>
<li><p><strong>Ground truth collection</strong> - Ground truth corpora consist of <a href="#raw_data">raw data</a> files, typically collected from sensors carried or worn by a subject, and <a href="#ground_truth">ground truth</a> labels provided by researchers, subjects, click workers, or other observers, over intervals of the data. The labels provide the <em>truth</em> about what the user (or device) was doing during the labeled interval, and are required for development and evaluation of most classification/detection/recognition systems.</p></li>
<li><p><strong>Recognizer development</strong> - The raw data and associated ground truth labels collected in the previous step are invaluable for the development, training, and testing of various components in a recognition system pipeline. Here we mainly focus on <a href="http://en.wikipedia.org/wiki/Binary_classification">binary classification</a> and define an abstract <a href="#recognizer_interface">recognizer interface</a> that allows recognizers to be plugged in to the system.</p></li>
<li><p><strong>Evaluation</strong> - Now, using this framework we can feed <a href="#raw_data">raw data</a> from selected <a href="#ground_truth">ground truth</a> cases to one or more recognizers that implement the <a href="#recognizer_interface">recognizer interface</a> and analyze the returned results. Results from each recognizer are compared with the labels from each ground truth case, and both individual and aggregate <a href="#test_results">test results</a> are computed and logged. Finally, detailed <a href="#metrics">performance metrics</a> are rendered for further inspection. </p></li>
<li><p><strong>Iteration</strong> - Based on the performance results, we may return to step 2 and tweak parameters, modify code, try something new, or to step 1 to scale-up the testing, gather more test data, etc, and improve performance. Once the performance of a recognizer is above the desired level for a diverse data set, we can be more confident in the feasibility of the approach.</p></li>
</ol>

<h2>Running Performance Tests</h2>

<p>The <code>perfboard</code> command line utility can be used to test the performance for one or more classifiers using a set of labeled <a href="#ground_truth">ground truth</a> data. The tool can instantiate one or more recognizers, read a set of ground truth files, feed raw data from the ground truths to the recognizers, retrieve the results from the recognizers, and finally compute and render performance metrics. Usage:</p>

<pre><code>perfboard.py [-h] [--outpath OUTPUT_PATH] --recognizers RECOGNIZER_LIST
                    TRUTH_FILE [TRUTH_FILE ...]
</code></pre>

<p>For example, to test the <code>test.recognizers.DummyWalkingDetector</code> against the <code>example_truth.json</code> test case:</p>

<pre><code>./perfboard.py --recognizers=test.recognizers.DummyWalkingDetector test/example_truth.json
</code></pre>

<p>By default, result objects are written to <code>static/scores.json</code> and then can be picked up from that location by the performance dashboard. The dashboard can be accessed by running a web server and serving the <code>perfboard/static</code> dir.</p>

<p><a id="raw_data"></a></p>

<h2>Raw Data</h2>

<p>Raw data files contain raw sensor and/or behavioral data, for example accelerometer continuously logged from the mobile device of a subject while the subject performs some sequence predefined activities. Raw data can be collected in any format, but we present a generic record structure here for various kinds of mobile data.</p>

<pre><code>record description coming soon...
</code></pre>

<p><a id="ground_truth"></a></p>

<h2>Ground Truth</h2>

<p>Ground truth files encode labels containing the precise start and end times of activities performed by the user, as well as references to the <a href="#raw_data">raw data</a> that corresponds to the activities. The ground truth label files are json encoded in <a href="http://www.json.org/">json</a> and have the following form:</p>

<pre><code class="jsontxt" id="truth_example"></code></pre>

<script>d3.json("example_truth.json", function(json) {$("#truth_example").html(syntaxHighlight(json));});</script>

<p><a id="recognizer_interface"></a></p>

<h2>Recognizer Interface</h2>

<p>Recognizers process time-ordered chunks of <a href="#raw_data">raw data</a> and produce sets of [recognizer results][]. The <code>perfboard.AbstractRecognizer</code> <a href="http://python.org">python</a> class is shown here: </p>

<pre><code>class AbstractRecognizer( object ):
    """Defines a simple generic recognizer interface."""
    def process(self, recs):
        """process raw data records and update internal state. `recs` is an iterable."""
        raise NotImplementedError("")

    def detected(self, time_range=None):
        """return ordered list of recognition results of the form `[{"t1":&lt;datetime_start&gt;, "t2":&lt;datetime_end&gt;, "label":&lt;string&gt;}, ...]`
        `time_range`, if present is a 2-tuple of datetime objects that restrict the result set to items with timestamps within, or overlapping, the range.
        """
        raise NotImplementedError()

    def labels(self):
        """returns a list of label classes that this recognizer supports"""
        raise NotImplementedError()
</code></pre>

<p><a id="test_results"></a></p>

<h2>Test Results</h2>

<p>The final test results are encoded in a object that combines all <a href="#ground_truth">ground truth</a> items, [recognizer results][], and performance metrics. Results for the above example, might look like:</p>

<pre><code class="jsontxt" id="results_example"></code></pre>

<script>d3.json("example_results.json", function(json) {$("#results_example").html(syntaxHighlight(json));});</script>

<p><a name="metrics"></a></p>

<h2>Performance Metrics</h2>

<p>The metrics used here are based on <span class="bibref">[<a href="#ref1">1</a>]</span>. For each ground truth, raw data is fed to each recognizer and result detail is generated.</p>

<h2>References</h2>

<p><a name="ref1"></a>
<span class="bibref">[1]</span> Ward, J. A., Lukowicz, P., &amp; Gellersen, H. W. (2011). Performance metrics for activity recognition. ACM Transactions on Intelligent Systems and Technology (TIST), 2(1), 1-23. doi:10.1145/1889681.1889687. <a href="http://gtubicomp.pbworks.com/w/file/fetch/48480476/Ward2011-Performance%20metrics%20for%20activity%20recognition.pdf">PDF</a></p>
